{% assign date = site.data.top-bar-offer.date %}
<div id="top-bar-offer" class="alert alert-dismissible align-middle bg-primary text-center text-white mb-0 pt-1 pb-1 rounded-0" role="alert" hidden>
  <span style="font-size: 0.9rem;">
   {{ site.data.top-bar-offer.offer-text }}
  </span>
  <a class="btn btn-sm shadow-none bg-white text-primary pl-3 pr-2 ml-2 text-capitalize" href="{{ site.data.top-bar-offer.link }}">
    {{ site.data.top-bar-offer.link-text }}
    &nbsp;
    <i aria-hidden="true" class="fas fa-arrow-right"></i>
  </a>
  <button type="button" class="close" data-dismiss="alert" aria-label="Close">
    <i aria-hidden="true" class="fal fa-times-circle"></i>
  </button>
</div>

<script>
  // Expire the cookie 1 day after the offer
  var date = new Date();
  date.setDate(new Date("{{ date }}").getDate() + 1);

  // You have to use jQuery to capture 'closed.bs.alert', so lame.
  // https://stackoverflow.com/questions/24211185/twitter-bootstrap-why-do-modal-events-work-in-jquery-but-not-in-pure-js
  $('#top-bar-offer').on('closed.bs.alert', function () {
    document.cookie = 'fusionauth.offer=dismissed; path=/; Expires=' + date.toString() + ';';
  });

  // Show the alert if it has not been dismissed
  var cookie = ("; " + document.cookie).split("; fusionauth.offer=").pop().split(";").shift();
  if (cookie === '') {
    document.getElementById('top-bar-offer').removeAttribute('hidden');
  }
</script>
