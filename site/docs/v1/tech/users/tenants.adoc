---
layout: doc
title: Tenants
description: An overview of FusionAuth Tenants
---

:sectnumlevels: 0

== Overview

FusionAuth is fundamentally a single tenant solution, so you may be surprised to learn that we support multiple tenants.

FusionAuth will always be a single tenant solution, this means that your instance of FusionAuth is your own and even when FusionAuth is hosting, we do not co-mingle your data with other clients. FusionAuth was built as a single tenant solution, and we have no plans to change anytime soon.

It is entirely likely that our clients may wish to be multi-tenant or offer their services to more than one client. In these scenarios it may be useful to separate Users, Applications and Groups for each of your clients.

For example, let's assume you are building a payroll offering using a SaaS model. In this case it is possible that `monica@piedpiper.com` works for two of your clients, Acme Corp and The Umbrella Company. Because Monica is not aware that Acme Corp and The Umbrella Company both are buying their Payroll software from the same vendor it would be surprising for Monica to share the same password and account details between these two companies. In this scenario you would likely want to utilize the FusionAuth Tenant to ensure that `monica@piedpiper.com` exists once for each instance of your Payroll offering.

== Create a Tenant

To create a new tenant, navigate to [breadcrumb]#Settings# icon:chevron-right[role=breadcrumb] [breadcrumb]#Tenants#.

image::create-tenant.png[Create a Tenant,width=1200,role=shadowed]

== Tenant Configuration
A majority of your FusionAuth configuration is managed at the Tenant-level.  Some of these configuration options act as defaults and can be overridden by the Application.

=== General
image::tenant-configuration-general.png[Tenant Configuration - General,width=1200,role=shadowed]

[cols="3a,7a"]
[.api]
.Form Fields
|===
|Issuer
|The named issuer used to sign tokens.  Typically a fully-qualified domain name.

|Login Theme
|The Theme associated with this Tenant; determines which templates to render for interactive work-flows.
|===

=== OAuth
image::tenant-configuration-oauth.png[Tenant Configuration - OAuth,width=1200,role=shadowed]

[cols="3a,7a"]
[.api]
.Form Fields
|===
|Session timeout
|The length of time an SSO session can be inactive before it is closed.

|Logout URL
|The URL the user is redirected to upon logout.
|===

=== JWT
image::tenant-configuration-jwt.png[Tenant Configuration - JWT,width=1200,role=shadowed]

[cols="3a,7a"]
[.api]
.Form Fields
|===
|Refresh token duration
|The length of time the refresh token is valid. Refresh tokens are typically long lived.

|JWT Duration
|The length of time the issued token (access token and Id token) is valid.  JWT tokens are typically short lived.

|Access token signing key
|The key used to sign the access token JWT.

|Id token signing key
|The key used to sign the Id token JWT.
|===


=== Advanced
image::tenant-configuration-extId-durations.png[Tenant Configuration - External Identifier Durations,width=1200,role=shadowed]

[cols="3a,7a"]
[.api]
.External identifier durations Form Fields
|===
|Authorization Code
|The number of seconds before the OAuth2 Authorization Code is no longer valid to be used to complete a Token request.

|Change Password
|The number of seconds before the Change Password identifier is no longer valid to complete the Change Password request.

|Email Verification
|The number of seconds before the Email Verification identifier is no longer valid to complete the Email Verification request.

|One Time Password
|The number of seconds before the One Time Password identifier is no longer valid to complete a Login request.

|Passwordless Login
|The number of seconds before the Passwordless Login identifier is no longer valid to complete a Login request.

|Registration Verification
|The number of seconds before the Registration Verification identifier is no longer valid to complete the Registration Verification request.

|Setup Password
|The number of seconds before the Setup Password identifier is no longer valid to complete the Change Password request.

|Two Factor Login
|The number of seconds before the Two Factor identifier is no longer valid to complete a Two Factor login request.

|Two Factor Trust
|The number of seconds before the Two Factor Trust is no longer valid and the user will be prompted for Two Factor during login.

|Device Grant Codes
|The number of seconds before the device_code and user_code are no longer valid to be used to complete the Device Code grant.
|===

image::tenant-configuration-extId-generation.png[Tenant Configuration - External Identifier Generation,width=1200,role=shadowed]

[cols="3a,7a"]
[.api]
.External identifier generation Form Fields
|===
|Change Password
|The length and type of characters of the generated code used in the Change Password flow.

|Email Verification
|The length and type of characters of the generated code used in the Email Verification flow.

|Passwordless Login
|The length and type of characters of the generated code used in the Passwordless Login flow.

|Registration Verification
|The length and type of characters of the generated code used in the Registration Verification flow.

|Setup Password
|The length and type of characters of the generated code used in the Setup Password flow.

|Device Grant User Code
|The length and type of characters of the generated user code used in the Device Authorization Grant flow.
|===

[cols="3a,7a"]
[.api]
.SMTP Settings Form Fields
|===
|Additional properties
|The custom SMTP configuration properties that may be necessary in some cases.
|===

== When to make a request with a Tenant Id
A "Request Headers" table will be present on APIs requiring a Tenant Id describing the options for proving the required Id.

Some resources in FusionAuth are scoped to Tenants and require a Tenant Id when making requests to their APIs.

When more than one tenant exists, some APIs will require a tenant Id to ensure the request is not ambiguous.

In many work-flows we use the `tenantId` to determine which themed templates to render to the end-user.

== Using a Tenant

In order to make API requests to FusionAuth for a particular Tenant you will need to provide the `tenantId`.


There are two supported methods to provide the tenant Id to FusionAuth during the API request. The first is by using
an HTTP header, and the other is using an API key that has been assigned to a specific tenant.

=== Using an HTTP Header

.HTTP Header example
--
The following example demonstrates an API request to an API endpoint requiring `tenantId`, using the 'X-FusionAuth-TenantId' HTTP header and a bearer token scoped to all tenants.
[source,bash]
----
curl -v -X POST \
    -H 'Authorization: bf69486b-4733-4470-a592-f1bfce7af580' \
    -H 'X-FusionAuth-TenantId: 6c9e9669-9670-4f85-9f16-8396c2206f7f' \
    -H 'Content-Type: application/json' \
    -d '{"group": {"name": "Admin"}}' \
    "http://localhost:9011/api/group"
----
--

=== Using an API key

You may optionally create an API key that is scoped to a particular tenant. To create an API key  navigate to [breadcrumb]#Settings# icon:chevron-right[role=breadcrumb] [breadcrumb]#API Keys#.

In the following example screenshot the tenant `Pied Piper` has been selected, this API key can be used to make API requests to FusionAuth instead of the HTTP header. Only Users, Groups and Applications belonging to the selected tenant will be visible to this API.

image::create-tenant-api-key.png[Create a Tenant API Key,width=1200,role=shadowed]

.Bearer Token example
--
The following example demonstrates an API request to an API endpoint requiring `tenantId`, using the tenant-scoped API key.
[source,bash]
----
curl -X POST \
    -H 'Authorization: oa06-d9uxCHTorBOkVdh_QzsX_iEEYARGv8udnMMLJ8' \
    -H 'Content-Type: application/json' \
    -d '{"group": {"name": "Admin"}}' \
    "http://localhost:9011/api/group"
----
--

=== Tenant Required Error

If you make an API request when the Tenant Id is required, you will receive a `400` response code with the following response body.

[source,json]
.Tenant Required Error
----
{
  "generalErrors" : [ {
    "code" : "[TenantIdRequired]",
    "message" : "A Tenant Id is required to complete this request. To complete this request, you may assign a Tenant to your API key, or add the X-FusionAuth-TenantId HTTP request header with the Tenant Id."
  } ]
}
----
